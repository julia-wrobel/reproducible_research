<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Project organization</title>
    <meta charset="utf-8" />
    <meta name="author" content="Hitchhiker’s Guide to Reproducible Research    Julia Wrobel and David Benkeser " />
    <script src="projectorg_slides_files/header-attrs-2.27/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: left, middle, inverse, title-slide

.title[
# Project organization
]
.author[
### Hitchhiker’s Guide to Reproducible Research <br> <span style="font-size: 75%;"> Julia Wrobel and David Benkeser </span>
]
.date[
### <br> <svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#ffffff;" xmlns="http://www.w3.org/2000/svg"> <path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg> <a href="https://bit.ly/sismid_hitchhikers">.white[Course Website]</a>
]

---



&lt;style type="text/css"&gt;
.remark-slide-content {
    font-size: 24px
}
&lt;/style&gt;



### Basic principles

* .red[Put everything in one version-controlled directory.]
* Develop your own system. 
* Be consistent, but look for ways to improve.
  * naming conventions, file structure
* Raw data are sacred. Keep them separate from everything else. 
* Separate code and data.
* Use `make` files and/or READMEs to document dependencies.
* No spaces in file names. 
* Use meaningful file names.
* Use YYYY-MM-DD date formatting.
* .red[No absolute paths.]


???

There is not one correct way to organize a project, but there are many incorrect ways. Over time you will develop your own system for doing so. We'll discuss a few frameworks that may be helpful. 

The biggest thing is to commit to using the same structure for as long as its working for you. As you are working on many projects, be self-aware during the process. Are you consistently losing track of certain types of files? Are there gaps in the workflow that make things hard to reproduce? What can you do to fill in the gaps?

Organization might not seem like a big deal now, but remember your career is just getting started. Expect to work on 2-20 different projects a year for the rest of your working life. The number of projects you will work on is staggering! You need a way to keep track.

---

background-color: #84754e
class: title-slide, center, inverse, middle

*You mostly collaborate with yourself, and me-from-two-months-ago never responds to email.*
&lt;div&gt; [Karen Cranston](http://kcranston.github.io/)

???

This is as much for preserving your own sanity as it is about being reproducible (though it is about that too). There's a (big) upfront cost here, but in the end it is worth it. 

Have sympathy for your future self!

---

### What to organize?

It is probably useful to have a system for organizing:
* data analysis projects;
* first-author papers;
* talks.

The systems should adhere to the same general principles, but different requirements may necessitate different structures. 

.red[Think about organization of a project from the outset!]

???

Thinking about project organization from the outset is the most important thing. Map out (e.g., as comments in a README) how you see the project developing. Even if things change over time, it's good to have a structure in place from the beginning. 

This pertains to project directories in particular, but also to your hard drive in general. What about projects that weren't finished when I got to Emory? What about projects that I continued developing once I got here. It's a mess. Don't be like me. 

---

### Collaborative projects

Collaborative projects present a greater challenge. 
* Not everyone is comfortable with LaTeX or git or ...

I don't have a great solution for this. 
* Google drive/Word online helps to a certain extent, but you lose in other areas (reference management, math typesetting)
* [Overleaf](http://overleaf.com/) has gotten much better for LaTeX

Some advice: 
* Address organization from the outset.
* Ideally, bring people on board to your (version controlled, reproducible) system.
* Keep open lines of communication (especially if using GitHub)

???

There's almost always some pain associated with working in close collaboration with someone else on a project. The most important thing is to commit to being organized from the outset. And to agree on what that means. 

Even if some elements of the project are outside your control, you can try to bring in elements to your workflow. 
* E.g., if you receive comments with tracked changes from a colleague, incorporate them into the document, add a commit message describing who's edits they were.

If working on a shared GitHub repo, keep open lines of communication, e.g., short emails (or [slack](https://slack.com/) messages, etc...), "Just pushed `x`..."


---


### Example data analysis project (Julia)

.code-box[
YYYY_MM_PI_topic/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; data/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; data/raw_data.csv &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; data/tidied_data.csv &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/exploratory_data_analysis.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/modeling.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/manuscript_figures.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/report.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; source/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; source/clean_raw_data.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; source/modeling_functions.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; results/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; literature/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; README.md &lt;br&gt;
]

???
This is MY process. You'll see on the next slide David's process. We are different, were trained differently. There are some things from David's process that I have learned from putting these slides together that I like, and will adopt in the future.

Goal is to find a workflow that will be AS EASY AS POSSIBLE FOR YOU TO ADOPT AND MAINTAIN IN THE LONG TERM.

Also, the files I need for a methods project versus a more applied project may be very different

Some notes:
* separate raw data and processed data
* separate folder for figures (could possible move R code for figures there)
* `sandbox` is where I like to keep messy stuff that I'm trying out but never want to see the light of day
* informative file names for `R` scripts broken down into logical steps of a workflow
* `.gitignore` would include
  * definitely: `figs/*`, `ref_papers/*`
  * possibly: `raw_data`/`data` (if sensitive), `sandbox` (if informal)

The `00`, `01`, ... number system is something that many people use because it helps create a sortable file system. It generally works, but some workflows don't really logically follow this sort of convention (e.g., things can happen in parallel).  

---

### Example data analysis project, cont'd (Julia)

I typically have other ancillary files in my root directory as well. These are files I don't (often) modify but are important for workflow or reproducibility:

.code-box[
YYYY_MM_PI_topic/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; YYYY_MM_PI_topic.Rproj &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; .git &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; .gitignore &lt;br&gt;
]

???

* `.gitignore` would include
  * definitely: `figs/*`, `ref_papers/*`
  * possibly: `raw_data`/`data` (if sensitive), `sandbox` (if informal)
  
  
---


### Example data analysis project (David)

.code-box[
analysis/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; raw_data/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; data/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; R/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/00_clean_data.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/01_fit_models.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/02_make_figures.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/03_summarize_results.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/04_report.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; figs/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; sandbox/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sandbox/exploratory.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; ref_papers/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; Makefile &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; README.md &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; renv
]

???

Some notes:
* separate raw data and processed data
* separate folder for figures (could possible move R code for figures there)
* `sandbox` is where I like to keep messy stuff that I'm trying out but never want to see the light of day
* informative file names for `R` scripts broken down into logical steps of a workflow
* `.gitignore` would include
  * definitely: `figs/*`, `ref_papers/*`
  * possibly: `raw_data`/`data` (if sensitive), `sandbox` (if informal)

The `00`, `01`, ... number system is something that many people use because it helps create a sortable file system. It generally works, but some workflows don't really logically follow this sort of convention (e.g., things can happen in parallel).  

---

### Example paper organization

.code-box[
paper/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/README.md &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/00_clean_data.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/01_fit_models.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/02_make_figures.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; analysis/sandbox &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; sim/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sim/README.md &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sim/helper_functions.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sim/sim_script.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sim/run_sim_script.sh &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; figs/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; notes/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; submitted/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; revision/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; final/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; README.md &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; Makefile &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; my_paper.tex &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; my_refs.bib 
]

???

Biostat methods papers often have three components: math, simulation, data analysis (prove your method works mathematically, show that it works on fake data, show it can be used on real data). Often these papers must be prepared using LaTeX. Here's an example directory of such a paper.

Some notes:
* separate READMEs for main project, `/analysis`, `/sim`
* if you submit to arxiv, medRxiv etc..., include that link somewhere you can easily find, e.g., in main README. 
* `/notes` contains random musings ("what would happen if...") and un-prettified math (e.g., pictures of my white board taken with a cell phone -- very high tech); could also include key emails from collaborators (easier to find while working on project)
* `submitted` might include the compiled pdf that was submitted to the journal and a README that indicates which commit contained the submitted version of the repo. Similar story for `revision` and `final`. 
* LaTeX produces lots of ugly files when it compiles documents (`.aux`, `.bbl`), in your `make paper` statement, remove those at the end.


I don't always have a separate paper repo, but you can.
--- 

### Example talk organization

.code-box[
jsm2020_talk/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; R/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; figs/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; README.md &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; Makefile &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; my_talk.Rmd &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; my_refs.bib 
]

???

Similar story here as with a paper. I have primarily used beamer (LaTeX) for talks in the past, but after this course, may be making the move to xaringan slides. 

Depending on how often you give a talk, you might consider:
* naming folder after talk subject rather than conference/talk location
* including an `old` folder that contains past versions of the talk given at previous locations (or could just tag GitHub repo at certain points)

---


### Organizing data

Raw data are sacred... but may be a mess. 
* You'll be surprised (and disheartened) by how many color-coded excel sheets you'll get in your life.

Tempting to edit raw data by hand. .red[Don't!]
* Everything scripted!

Use meta-data files to describe raw and cleaned data.
* structure as data (e.g., `.csv` so easy to read)

???

The generation of the raw data may be the one thing out of your control in an analysis. But from the time the data are passed on to you, everything that happens should be reproducible. 

This can be painful. For many projects, 90% of time might be devoted to wrangling raw data into a format that is usable. Save yourself from the danger of having to re-do all those painful bits when (not if) the data change.

You should be able to get a new version of the data and easily re-run your analysis. Urge your collaborators to not mess with the structure of the data in between versions.
---

### Organizing data

Hadley Wickham [defined the notion of tidy data](https://doi.org/10.18637/jss.v059.i10). 
* Each variable forms a column.
* Each observation forms a row.
* Each observational unit forms a table. 

.code-box[
| ptid | day | age | drug | out |
|------|-----|-----|------|-----|
| 1    | 1   | 28  | 0    | 0   |
| 1    | 2   | 28  | 0    | 1   |
| 2    | 1   | 65  | 0    | 0   |
| 2    | 2   | 65  | 1    | 1   |
| 3    | 1   | 34  | 0    | 0   |
| 3    | 2   | 34  | -    | 1   |
]

### Exploring data

One of the first things we'll often do is open the data and start poking around.
* Could be informal, "getting to know you."
* Could be more formal, "see if anything looks interesting."

This is often done in an ad-hoc way:
* entering commands directly into R;
* making and saving plots "by hand"; 
* etc...

.red[Slow down and document.]
* Your future self will thank you!

???

You want to avoid situations like:
* need to recreate a plot that you made "by hand" and saved "by hand";
* figuring out why you removed certain observations;
* trying to remember what variables had an interesting relationship that you wanted to follow up on later.

### Exploring data

Write out a set of comments describing what you are try to accomplish and fill in code from there. 
* I do this for every coding project.
  * Data analysis, methods coding, package development

Leave a search-able comment tag by code to return to later
* I use e.g., `# TO DO: add math expression to labels; make colors prettier`.

Sets "the bones" of a formal analysis in place while allowing for some creative flow. 

???

From the outset, stop and think about what you want to do. Start filling in details from there. That simple approach will increase efficiency and reproducibility. 

---

### Exploring data

Other helpful ideas for formalizing exploratory data analysis:
* Informal `.Rmd` documents. 
  * easy way to organize code/comments into readable format
* `.Rhistory` files
  * all the commands used in an R session
* `save` intermediate objects and workspaces
  * and document what they contain! 
* `knitr::spin` 
  * writing `.R` scripts with rendered-able comments 

---


### Automated project initiation using `projectr` 

The `projectr` package sets my preferred directory structure for a new project.
* Borrowed *heavily* from `jeff-goldsmith/projectr`.
  

``` r
devtools::install_github("julia-wrobel/projectr")

projectr::proj_start(proj_dir = "~/projects/2024/202407_PERSON_PROJECT", 
                     data_dir = "~/Data/202407_data")
```



__proj_dir__: where on your computer you want the project to live
* *~Documents/projects/2024/* is where I store new projects
* Whatever you decide, be consistent!

__data_dir__: where the data to live, if not within your project folder
* Sets up a symbolic link from the project directory to this folder

???
Talk about choosing where your main file and your data files should live. This should lead us to symbolic links

---


### Symbolic links

There are great reasons NOT to put your raw data in the project folder
* iOS uploads many folders automatically to the cloud
* if you want to put the project on GitHub, you might want to exclude the data
* maybe data is stored on OneDrive/Box/AWS and you don't want to download a local copy

&lt;img src="figures/projectr_example.png" style="width:105%"&gt;

???
A symbolic link is basically just the Unix name for a shortcut. It allows the data to be accessed through the project directory data subfolder, even if the data is actually stored somewhere else.

---

### Setting up a symbolic link in the terminal

Pseudo code for setting up a symbolic link:


``` bash
ln -s /path/to/target /path/to/symlink
```



???
Knowing how to use the terminal will already come in handy! I've needed to set these up by hand a couple of times. For example, if I change the location of my data or if I get a new computer with a different username, which breaks the symbolic link
---

### .Rproj files

You may have noticed a file with the extension `.Rproj` in the productTesting folder
* These are called `R projects` 
* `projectr::proj_start()` automatically sets up an `.Rproj`.
&lt;img src="figures/Rproj_example.png" style="width:105%"&gt;

I'm going to try to convince you that these are the best.

---


### Benefits of using R projects

__Project organization__: 
* Keeps all related files (scripts, data, outputs) in a dedicated project folder
* Relative file paths: ensures file paths are relative to the project directory, making scripts portable and easier to share.
* Separate workspaces: prevents conflicts between variables and packages across different projects.


__Reproducibility__
* Can hand off entire directory to someone else and have them rerun your analysis
* Works great with the `here` package

Double clicking the `202405_sarah_productTesting.Rproj` opens up an R Studio session and automatically sets your working directory to the `202405_sarah_productTesting` folder.


???
We will get to the here package in a bit.
---

### Exercise 1

Perform the following tasks (independently). You make speak with your neighbors for advice, but we will be using this folder for the rest of the lecture so please set up your own folder.

1. Use `projectr::proj_start()` to initiate a new project called `20240722_YOURNAME_sismid`.   Use the argument `data_dir = NULL`. Where is your data being stored?
2. Using the terminal, set up a symbolic link for where you will store data for this course that points to `20240722_YOURNAME_sismid/data`.
3. 


---



### The `here` package

.red[No absolute paths.]
* Absolute paths are the enemy of project reproducibility.

For `R` projects, the [`here`](https://here.r-lib.org/) package provides a simple way to use relative file paths.
* Read [Jenny Bryan and James Hester's chapter](https://rstats.wtf/project-oriented-workflow.html) on project-oriented work-flows.

The use of `here` is dead-simple and best illustrated by example.

---

### The `here` package

Consider this simple project structure.

.code-box[
my_project/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; data/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; my_data.csv &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; output/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; R/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; R/my_analysis.R &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; Rmd/ &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Rmd/my_report.Rmd &lt;br&gt;
]

Here, the folder `my_project` is the __root directory__.
* Where `.git` lives
* All file paths should be .green[relative] to `my_project`!

---

### The `here` package

Each `R` script or `Rmd` report, should contain a call to `here::i_am('path/to/this/file')` at the top.
* `path/to/this/file` should be replaced with the path .green[relative] to the project's __root directory__.
* `here::i_am` means use function `i_am` from `here` package.

For example, the file `R/my_analysis.R` might look like this.

````
# include at top of script
here::i_am('R/my_analysis.R')

# now add all your great R code...
````

---

### The `here` package

`Rmd/my_report.Rmd` should include an `R` chunk that calls `i_am`.

````
---
output: html_document
---

```{r}
here::i_am('Rmd/my_report.Rmd')
```

&lt;!-- Now the rest of your Rmd code --&gt;
````

---

### The `here` package

The call to `i_am` establishes the __root directory__.
* Subsequent file paths can be made using the `here` function.

For example, `my_analysis.R` might look like this.

````


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
